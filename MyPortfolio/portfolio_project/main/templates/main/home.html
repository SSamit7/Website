{% extends 'main/base.html' %}
{% load static %}

{% block title %}Home - My Portfolio{% endblock %}

{% block extra_css %}
<style>
    /* Advanced Animations */
    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes scaleIn {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    @keyframes floatAnimation {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }

    @keyframes glowPulse {
        0%, 100% {
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        50% {
            text-shadow: 0 0 25px rgba(16, 185, 129, 0.6);
        }
    }

    @keyframes shimmer {
        0% {
            background-position: -1000px 0;
        }
        100% {
            background-position: 1000px 0;
        }
    }

    @keyframes lineGrow {
        from {
            width: 0;
        }
        to {
            width: 4rem;
        }
    }

    /* Apply Animations */
    .hero-welcome {
        animation: fadeInDown 0.8s ease-out;
    }

    .hero-title {
        animation: fadeInDown 1s ease-out 0.2s both;
    }

    .hero-subtitle {
        animation: fadeInUp 1s ease-out 0.4s both;
    }

    .hero-description {
        animation: fadeInUp 1s ease-out 0.6s both;
    }

    .hero-buttons {
        animation: fadeInUp 1s ease-out 0.8s both;
    }

    .tech-stack-label {
        animation: fadeInDown 1s ease-out 0.4s both;
    }

    .tech-badge {
        animation: scaleIn 0.6s ease-out;
    }

    .tech-badge:nth-child(1) { animation-delay: 1.2s; }
    .tech-badge:nth-child(2) { animation-delay: 1.3s; }
    .tech-badge:nth-child(3) { animation-delay: 1.4s; }
    .tech-badge:nth-child(4) { animation-delay: 1.5s; }
    .tech-badge:nth-child(5) { animation-delay: 1.6s; }

    .scroll-indicator {
        animation: floatAnimation 3s ease-in-out infinite;
    }

    .section-title {
        animation: slideInLeft 0.8s ease-out;
    }

    .section-divider {
        animation: lineGrow 0.8s ease-out 0.2s both;
    }

    .project-card {
        animation: fadeInUp 0.8s ease-out;
    }

    .project-card:nth-child(1) { animation-delay: 0.2s; }
    .project-card:nth-child(2) { animation-delay: 0.4s; }
    .project-card:nth-child(3) { animation-delay: 0.6s; }
    .project-card:nth-child(4) { animation-delay: 0.8s; }

    .cta-content {
        animation: fadeInUp 0.8s ease-out;
    }

    .hero-title {
        animation: glowPulse 3s ease-in-out infinite, fadeInDown 1s ease-out 0.2s both;
    }

    /* Enhanced Hover Effects */
    .tech-badge {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .tech-badge:hover {
        transform: translateY(-8px) scale(1.05);
        border-color: #10b981;
        background-color: rgba(16, 185, 129, 0.15);
        box-shadow: 0 8px 16px rgba(16, 185, 129, 0.2);
    }

    .card {
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .card:hover {
        transform: translateY(-12px);
        border-color: #10b981;
        box-shadow: 0 20px 40px rgba(16, 185, 129, 0.15);
    }

    .btn {
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .btn:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(16, 185, 129, 0.25);
    }

    .btn:active {
        transform: translateY(-2px);
    }

    /* Smooth Scroll Behavior */
    html {
        scroll-behavior: smooth;
    }

    /* Text Animation */
    .text-gradient {
        background: linear-gradient(135deg, #6ee7b7 0%, #10b981 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Stagger Animation */
    .stagger > * {
        animation: fadeInUp 0.8s ease-out;
    }

    .stagger > *:nth-child(1) { animation-delay: 0s; }
    .stagger > *:nth-child(2) { animation-delay: 0.1s; }
    .stagger > *:nth-child(3) { animation-delay: 0.2s; }
    .stagger > *:nth-child(4) { animation-delay: 0.3s; }
    .stagger > *:nth-child(5) { animation-delay: 0.4s; }

    @keyframes chatSlideIn {
        from {
            opacity: 0;
            transform: translateY(40px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .chat-section {
        animation: chatSlideIn 0.8s ease-out;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 relative overflow-hidden">
    <!-- Background Grid Effect -->
    <div class="absolute inset-0 opacity-10">
        <div style="background-image: linear-gradient(0deg, transparent 24%, rgba(16, 185, 129, 0.05) 25%, rgba(16, 185, 129, 0.05) 26%, transparent 27%, transparent 74%, rgba(16, 185, 129, 0.05) 75%, rgba(16, 185, 129, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(16, 185, 129, 0.05) 25%, rgba(16, 185, 129, 0.05) 26%, transparent 27%, transparent 74%, rgba(16, 185, 129, 0.05) 75%, rgba(16, 185, 129, 0.05) 76%, transparent 77%, transparent); background-size: 50px 50px;" class="w-full h-full"></div>
    </div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="mb-8 hero-welcome">
            <span class="text-green-400 text-lg">$ Welcome to my terminal</span>
        </div>

        <h1 class="text-5xl sm:text-6xl md:text-7xl font-bold mb-6 hero-title">
            <span class="text-green-300">;</span> Full Stack Developer
        </h1>

        <p class="text-xl text-gray-300 mb-4 font-light hero-subtitle">
            <span class="text-green-400">&gt;</span> Building beautiful, functional web applications
        </p>

        {% if profile %}
        <p class="text-gray-400 mb-12 max-w-2xl mx-auto hero-description">
            {{ profile.bio }}
        </p>
        {% else %}
        <p class="text-gray-400 mb-12 max-w-2xl mx-auto hero-description">
            I specialize in full-stack development and creating seamless digital experiences. Currently exploring the intersection of AI and web development.
        </p>
        {% endif %}

        <div class="flex flex-col sm:flex-row gap-6 justify-center mb-16 hero-buttons">
            <a href="{% url 'main:projects' %}" class="btn">
                &gt; View Projects
            </a>
            <a href="{% url 'main:about' %}" class="btn btn-outline">
                &gt; About Me
            </a>
        </div>

        <!-- Tech Stack Preview -->
        <div class="mt-20 border-t border-green-500/20 pt-12">
            <p class="text-green-400 mb-6 tech-stack-label">&gt; Quick Tech Stack</p>
            <div class="flex flex-wrap gap-4 justify-center stagger">
                {% for skill in featured_skills %}
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300 hover:border-green-400 hover:bg-gray-800">
                        {{ skill.name }}
                    </div>
                {% empty %}
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300">Python</div>
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300">Django</div>
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300">React</div>
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300">Tailwind CSS</div>
                    <div class="tech-badge px-4 py-2 bg-gray-900 border border-green-500/30 rounded text-green-300">PostgreSQL</div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 scroll-indicator">
        <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
    </div>
</section>

<!-- Featured Projects Section -->
<section class="py-20 bg-gray-900/50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-16">
            <h2 class="text-4xl font-bold mb-4 section-title">
                <span class="text-green-400">&gt;</span> Featured Projects
            </h2>
            <div class="w-16 h-1 bg-gradient-to-r from-green-400 to-transparent section-divider"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            {% for project in featured_projects %}
                <div class="card project-card group cursor-pointer">
                    {% if project.image %}
                        <img src="{{ project.image.url }}" alt="{{ project.title }}" class="w-full h-40 object-cover rounded mb-4 opacity-80 group-hover:opacity-100 transition">
                    {% endif %}
                    <h3 class="text-xl font-bold text-green-300 mb-2">{{ project.title }}</h3>
                    <p class="text-gray-400 mb-4">{{ project.description|truncatewords:20 }}</p>
                    <div class="flex gap-2 flex-wrap mb-4 stagger">
                        {% for tech in project.get_technologies %}
                            <span class="text-xs px-2 py-1 bg-green-900/30 text-green-300 rounded border border-green-500/50 transition hover:bg-green-900/50">
                                {{ tech }}
                            </span>
                        {% endfor %}
                    </div>
                    <a href="{{ project.get_absolute_url }}" class="text-green-400 hover:text-green-300 inline-flex items-center transition">
                        View Project â†’
                    </a>
                </div>
            {% empty %}
                <div class="card project-card">
                    <h3 class="text-lg font-bold text-green-300">No Projects Yet</h3>
                    <p class="text-gray-400">Add projects from the admin panel to showcase your work.</p>
                </div>
                <div class="card project-card">
                    <h3 class="text-lg font-bold text-green-300">Add Your Work</h3>
                    <p class="text-gray-400">Go to /admin to add your first project.</p>
                </div>
            {% endfor %}
        </div>

        <div class="text-center mt-12">
            <a href="{% url 'main:projects' %}" class="btn">
                &gt; View All Projects
            </a>
        </div>
    </div>
</section>

<!-- AI Chat Section -->
<section class="py-20 bg-gradient-to-r from-green-500/10 to-cyan-500/10 border-y border-green-500/20 chat-section">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="mb-12 text-center">
            <h2 class="text-3xl font-bold mb-4">
                <span class="text-cyan-400">$</span> AI Assistant
            </h2>
            <p class="text-gray-400">Ask me anything about web development</p>
        </div>

        <div class="card max-w-2xl mx-auto">
            <div class="mb-6">
                <div class="flex gap-4">
                    <input 
                        type="text" 
                        id="chatInput" 
                        placeholder="What is Django?" 
                        class="flex-1 px-4 py-3 bg-gray-800 border border-green-500/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-green-400 transition"
                    >
                    <button 
                        id="chatSend" 
                        class="px-6 py-3 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 transition border border-green-400"
                    >
                        Ask AI
                    </button>
                </div>
            </div>
            
            <div id="chatOutput" class="min-h-32 p-4 bg-gray-800/50 rounded-lg border border-green-500/20">
                <p class="text-gray-400 text-center">Ask a question about web development...</p>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action Section -->
<section class="py-20 bg-gradient-to-r from-green-500/10 to-cyan-500/10 border-y border-green-500/20">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center cta-content">
        <h2 class="text-3xl font-bold mb-6">
            <span class="text-cyan-400">$</span> Interested in collaborating?
        </h2>
        <p class="text-gray-300 mb-8">
            I'm always open to discussing new projects, creative ideas, or opportunities to be part of your vision.
        </p>
        <a href="{% url 'main:contact' %}" class="btn">
            &gt; Get In Touch
        </a>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');
    const chatOutput = document.getElementById('chatOutput');
    
    if (!chatInput || !chatSend || !chatOutput) return;
    
    window.askAI = async function() {
        const question = chatInput.value.trim();
        
        if (!question) {
            chatOutput.innerHTML = '<p class="text-red-400">Please enter a question</p>';
            return;
        }
        
        chatOutput.innerHTML = '<p class="text-cyan-400">ðŸ¤” Thinking...</p>';
        chatSend.disabled = true;
        
        try {
            const response = await fetch('/chat/ask/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': getCookie('csrftoken'),
                },
                body: 'question=' + encodeURIComponent(question)
            });
            
            const data = await response.json();
            chatOutput.innerHTML = `<p class="text-green-300">ðŸ¤– ${data.response}</p>`;
            
        } catch (error) {
            chatOutput.innerHTML = `<p class="text-red-400">Error: ${error.message}</p>`;
        } finally {
            chatSend.disabled = false;
        }
    };
    
    chatSend.addEventListener('click', window.askAI);
    chatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') window.askAI();
    });
});

function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>
{% endblock %}